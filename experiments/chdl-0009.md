# chdl-0009

## Top 25 Works at CH
### Ever wonder what the most popular works are at Carnegie Hall?


* <em>Click a composer's name to see their Wikidata item</em><br> 
* <em>Click a work title to see it's CH performance history</em>


| **Composer**  | **Work Title**  | **Number of Performances**  |
|:---:|:---:|:---:|
 | <a href="http://www.wikidata.org/entity/Q563098" target="_blank">John Stafford Smith</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=The%20Star%20Spangled%20Banner" target="_blank">The Star Spangled Banner<a/> | 680 | 
 | <a href="http://www.wikidata.org/entity/Q1268" target="_blank">Frederic Chopin</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Ballade%20No.%201%20in%20G%20Minor,%20Op.%2023" target="_blank">Ballade No. 1 in G Minor, Op. 23<a/> | 392 | 
 | <a href="http://www.wikidata.org/entity/Q7302" target="_blank">George Frideric Handel</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Messiah" target="_blank">Messiah<a/> | 379 | 
 | <a href="http://www.wikidata.org/entity/Q1511" target="_blank">Richard Wagner</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Die%20Meistersinger%20von%20N%C3%BCrnberg%3A%20Act%20I.%20Prelude" target="_blank">Die Meistersinger von Nürnberg: Act I. Prelude<a/> | 357 | 
 | <a href="http://www.wikidata.org/entity/Q7294" target="_blank">Johannes Brahms</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Symphony%20No.%201%20in%20C%20Minor,%20Op.%2068" target="_blank">Symphony No. 1 in C Minor, Op. 68<a/> | 355 | 
 | <a href="http://www.wikidata.org/entity/Q255" target="_blank">Ludwig van Beethoven</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Symphony%20No.%205%20in%20C%20Minor,%20Op.%2067" target="_blank">Symphony No. 5 in C Minor, Op. 67<a/> | 326 | 
 | <a href="http://www.wikidata.org/entity/Q1268" target="_blank">Frederic Chopin</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Polonaise%20in%20A-flat%20Major,%20Op.%2053" target="_blank">Polonaise in A-flat Major, Op. 53<a/> | 310 | 
 | <a href="http://www.wikidata.org/entity/Q255" target="_blank">Ludwig van Beethoven</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Symphony%20No.%207%20in%20A%20Major,%20Op.%2092" target="_blank">Symphony No. 7 in A Major, Op. 92<a/> | 300 | 
 | <a href="http://www.wikidata.org/entity/Q255" target="_blank">Ludwig van Beethoven</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Piano%20Sonata%20No.%2023%20in%20F%20Minor,%20Op.%2057,%20%22Appassionata%22" target="_blank">Piano Sonata No. 23 in F Minor, Op. 57, "Appassionata"<a/> | 294 | 
 | <a href="http://www.wikidata.org/entity/Q1268" target="_blank">Frederic Chopin</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Ballade%20No.%204%20in%20F%20Minor,%20Op.%2052" target="_blank">Ballade No. 4 in F Minor, Op. 52<a/> | 292 | 
 | <a href="http://www.wikidata.org/entity/Q1268" target="_blank">Frederic Chopin</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Scherzo%20No.%202%20in%20B-flat%20Minor,%20Op.%2031" target="_blank">Scherzo No. 2 in B-flat Minor, Op. 31<a/> | 292 | 
 | <a href="http://www.wikidata.org/entity/Q7294" target="_blank">Johannes Brahms</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Symphony%20No.%202%20in%20D%20Major,%20Op.%2073" target="_blank">Symphony No. 2 in D Major, Op. 73<a/> | 291 | 
 | <a href="http://www.wikidata.org/entity/Q7294" target="_blank">Johannes Brahms</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Symphony%20No.%204%20in%20E%20Minor,%20Op.%2098" target="_blank">Symphony No. 4 in E Minor, Op. 98<a/> | 288 | 
 | <a href="http://www.wikidata.org/entity/Q255" target="_blank">Ludwig van Beethoven</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Symphony%20No.%203%20in%20E-flat%20Major,%20Op.%2055,%20%22Eroica%22" target="_blank">Symphony No. 3 in E-flat Major, Op. 55, "Eroica"<a/> | 283 | 
 | <a href="http://www.wikidata.org/entity/Q255" target="_blank">Ludwig van Beethoven</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Leonore%20Overture%20No.%203,%20Op.%2072b" target="_blank">Leonore Overture No. 3, Op. 72b<a/> | 282 | 
 | <a href="http://www.wikidata.org/entity/Q46096" target="_blank">Felix Mendelssohn</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Violin%20Concerto%20in%20E%20Minor,%20Op.%2064" target="_blank">Violin Concerto in E Minor, Op. 64<a/> | 281 | 
 | <a href="http://www.wikidata.org/entity/Q1268" target="_blank">Frederic Chopin</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Ballade%20No.%203%20in%20A-flat%20Major,%20Op.%2047" target="_blank">Ballade No. 3 in A-flat Major, Op. 47<a/> | 281 | 
 | <a href="http://www.wikidata.org/entity/Q1511" target="_blank">Richard Wagner</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Tannh%C3%A4user%3A%20Overture" target="_blank">Tannhäuser: Overture<a/> | 280 | 
 | <a href="http://www.wikidata.org/entity/Q1268" target="_blank">Frederic Chopin</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Piano%20Sonata%20in%20B%20Minor,%20Op.%2058" target="_blank">Piano Sonata in B Minor, Op. 58<a/> | 270 | 
 | <a href="http://www.wikidata.org/entity/Q1268" target="_blank">Frederic Chopin</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Barcarolle%20in%20F-sharp%20Major,%20Op.%2060" target="_blank">Barcarolle in F-sharp Major, Op. 60<a/> | 268 | 
 | <a href="http://www.wikidata.org/entity/Q132682" target="_blank">Modest Mussorgsky</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Pictures%20at%20an%20Exhibition" target="_blank">Pictures at an Exhibition<a/> | 266 | 
 | <a href="http://www.wikidata.org/entity/Q7315" target="_blank">Pyotr Ilyich Tchaikovsky</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Symphony%20No.%205%20in%20E%20Minor,%20Op.%2064" target="_blank">Symphony No. 5 in E Minor, Op. 64<a/> | 261 | 
 | <a href="http://www.wikidata.org/entity/Q1268" target="_blank">Frederic Chopin</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Scherzo%20No.%203%20in%20C-sharp%20Minor,%20Op.%2039" target="_blank">Scherzo No. 3 in C-sharp Minor, Op. 39<a/> | 256 | 
 | <a href="http://www.wikidata.org/entity/Q1511" target="_blank">Richard Wagner</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Tristan%20und%20Isolde%3A%20Prelude%20and%20Liebestod" target="_blank">Tristan und Isolde: Prelude and Liebestod<a/> | 253 | 
 | <a href="http://www.wikidata.org/entity/Q7294" target="_blank">Johannes Brahms</a> | <a href="https://www.carnegiehall.org/About/History/Performance-History-Search?q=&dex=prod_PHS&w=Violin%20Concerto%20in%20D%20Major,%20Op.%2077" target="_blank">Violin Concerto in D Major, Op. 77<a/> | 252 | 



[Return to Experiments page]({{ '/experiments' | absolute_url }})

# Lab Report

## EXPERIMENT LABEL/TITLE
Top 25 Works at CH

## TL;DR
Create a query to show the 25 most often performed works at Carnegie Hall, and create a user-friendly display.

# -verbose

## METHODS
We created a SPARQL query to return the composer name (plus their Wikidata Item ID), work title, and performance count of each work. By asking the query engine to sort the results in descending order and limiting the result set to the first 25 pattern matches, we can show the top 25 most often performed works:

```
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX event: <http://purl.org/NET/c4dm/event.owl#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
SELECT DISTINCT ?composerName ?wikidataLink ?workTitle (COUNT(DISTINCT ?workPerf) AS ?numberOfPerformances)
WHERE {
    ?work dcterms:creator ?composer ;
          rdfs:label ?workTitle .
    ?composer foaf:name ?composerName .
    ?event event:product ?workPerf .
    ?workPerf event:product ?work .
    MINUS { ?composer foaf:name "Anonymous" . }
    OPTIONAL { ?composer skos:exactMatch ?wikidataLink .
        filter contains(str(?wikidataLink), "wikidata")}
}
GROUP BY ?composerName ?workTitle ?wikidataLink
ORDER BY DESC(?numberOfPerformances)
LIMIT 25
```
Note that for many earlier events, program listings were sometimes vague, or, since our archives weren't established until 1986, we may have incomplete information, or may be missing the information altogether. Because of this, our database has many event records where works had to be recorded with "Anonymous" as the composer and work titles like "Unknown selection". In order to filter out the relatively high number of such entries, we included a ```MINUS``` pattern:
```
MINUS { ?composer foaf:name "Anonymous" . }
```
In fairness, the "high" number of Anonymous/Unknown selection entries is relative only to the kinds of numbers we see with often-performed works. When viewed in the context of ~100,000 musical works performed across 50,000+ events over 130 years, 500 or so instances of an unknown work is actually not very high, especially considering how often we aren't in control of the quality of event information to which we have access.

## CONCLUSIONS
### what we learned
News flash: Chopin, Beethoven, and Brahms are popular 🙃! That Richard Wagner places so high might surprise modern audiences, since his works are not so often performed outside of the opera house anymore, but they were *very* popular during the first 50 years (1891 through the early 1940s) of the Hall's history. That Tchaikovsky doesn't appear until No. 22 *is* surprising, in some ways -- but in other ways this shows us how the popularity of some composers (Wagner, Tchaikovsky) ebbs and flows more than others (Chopin, Beethoven, Brahms) whose popularity seems consistently high througout the years.

### further investigation 
It would be interesting to dig more deeply into the details to examine the year-by-year waxing and waning of the popularity of certain composers and works.


[Return to Experiments page]({{ '/experiments' | absolute_url }})
